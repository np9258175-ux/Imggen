<!DOCTYPE html>
<html>
<head>
  <title>Magic Hour1 Image Generator</title>
</head>
<body>
  <h1>Magic Hour Image Generator</h1>

  <textarea id="prompt" rows="4" cols="50" placeholder="Enter prompt"></textarea><br>
  <button onclick="generateImage()">Generate Image</button>

  <h2>Result:</h2>
  <div id="image-container">No image yet</div>

  <h2>Logs:</h2>
  <pre id="log"></pre>

  <script>
    const API_KEY = "mhk_live_BgcvT6syOzTtmUIr2mUy8fjQ8nNGwCcTqqWNhfqEGHHKQ37uZLaLFM5V6dQ5aBtEU42OdSE3Pfv9Bj5L";
    const resultDiv = document.getElementById("image-container");
    const logDiv = document.getElementById("log");

    async function generateImage() {
      const prompt = document.getElementById("prompt").value.trim();
      if (!prompt) return alert("Enter prompt");

      resultDiv.innerText = "⏳ Generating image...";
      logDiv.innerText = "";

      try {
        const resp = await fetch("https://api.magichour.ai/v1/ai-image-generator", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": `Bearer ${API_KEY}`
          },
          body: JSON.stringify({
            image_count: 1,
            orientation: "square",
            style: { prompt: prompt },
            name: prompt,
            wait_for_completion: true   // ← important
          })
        });

        const data = await resp.json();
        logDiv.innerText += "API Response:\n" + JSON.stringify(data, null, 2) + "\n";

        if (data.outputs && data.outputs[0]?.url) {
          const url = data.outputs[0].url;
          resultDiv.innerHTML = `<img src="${url}" width="400" alt="Generated Image">`;
          logDiv.innerText += "✅ Image displayed successfully\n";
        } else {
          resultDiv.innerText = "❌ Image not available";
        }

      } catch (err) {
        resultDiv.innerText = "⚠️ Error occurred!";
        logDiv.innerText += "Error: " + err.message + "\n";
      }
    }
  </script>
</body>
</html>  </script>
</body>
</html>
